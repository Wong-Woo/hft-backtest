# ML ê°€ê²© ì˜ˆì¸¡ ì „ëµ (Price Prediction Strategy)

## ê°œìš”

ì˜¤ë”ë¶ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ **1ì´ˆ í›„ ê°€ê²© ë³€í™”ë¥¼ ì˜ˆì¸¡**í•˜ëŠ” ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ íŠ¸ë ˆì´ë”© ì „ëµì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- **Candle** ë”¥ëŸ¬ë‹ í”„ë ˆì„ì›Œí¬ ì‚¬ìš© (Rust ë„¤ì´í‹°ë¸Œ)
- ì˜¤ë”ë¶ ë¶ˆê· í˜•, ì••ë ¥, ë³€ë™ì„± ë“± 8ê°€ì§€ íŠ¹ì„± ì¶”ì¶œ
- MLP(Multi-Layer Perceptron) ì‹ ê²½ë§ ê¸°ë°˜ ì˜ˆì¸¡
- ì˜¨ë¼ì¸ í•™ìŠµìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë¸ ê°œì„ 

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Orderbook Data                             â”‚
â”‚   (Best Bid/Ask, ë‹¤ì¸µ ìˆ˜ëŸ‰, ìŠ¤í”„ë ˆë“œ, ê°€ê²© ë³€í™”)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              OrderBookFeatureExtractor                        â”‚
â”‚  - spread_bps (ìŠ¤í”„ë ˆë“œ, basis points)                        â”‚
â”‚  - imbalance_level1 (1ì°¨ ë ˆë²¨ ë¶ˆê· í˜•)                         â”‚
â”‚  - imbalance_multi_level (ë‹¤ì¸µ ë¶ˆê· í˜•)                        â”‚
â”‚  - pressure_ratio (bid/ask ì••ë ¥ ë¹„ìœ¨)                        â”‚
â”‚  - price_change_pct (ê°€ê²© ë³€í™”ìœ¨)                             â”‚
â”‚  - volatility (ë³€ë™ì„±)                                        â”‚
â”‚  - volume_weighted_spread (ìˆ˜ëŸ‰ ê°€ì¤‘ ìŠ¤í”„ë ˆë“œ)                 â”‚
â”‚  - trade_intensity (ê±°ë˜ ê°•ë„)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PricePredictor (MLP)                        â”‚
â”‚                                                              â”‚
â”‚   Input (8) â†’ Hidden1 (32, ReLU) â†’ Hidden2 (16, ReLU) â†’ Out  â”‚
â”‚                                                              â”‚
â”‚   Output: ì˜ˆì¸¡ ê°€ê²© ë³€í™”ìœ¨ (%)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PredictionSignal                               â”‚
â”‚   - Up: ì˜ˆì¸¡ê°’ > threshold â†’ Long í¬ì§€ì…˜                      â”‚
â”‚   - Down: ì˜ˆì¸¡ê°’ < -threshold â†’ Short í¬ì§€ì…˜                  â”‚
â”‚   - Neutral: í¬ì§€ì…˜ ìœ ì§€                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## íŒŒì¼ êµ¬ì¡°

```
src/strategy/prediction/
â”œâ”€â”€ mod.rs                  # ëª¨ë“ˆ ê³µê°œ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ orderbook_features.rs   # ì˜¤ë”ë¶ íŠ¹ì„± ì¶”ì¶œê¸°
â”œâ”€â”€ price_predictor.rs      # MLP ì‹ ê²½ë§ ì˜ˆì¸¡ ëª¨ë¸
â””â”€â”€ prediction_runner.rs    # ì „ëµ ì‹¤í–‰ê¸°
```

## ì‚¬ìš©ë²•

### ì‹¤í–‰
```bash
# ê¸°ë³¸ ì‹¤í–‰ (ML Prediction ì „ëµì´ ê¸°ë³¸)
cargo run

# ë˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ
cargo run predict
cargo run prediction
cargo run ml
```

### ì„¤ì • (config.rs)

```rust
// í¬ì§€ì…˜ í¬ê¸°
pub const PREDICTION_POSITION_SIZE: f64 = 0.05;

// ì†ì ˆ/ìµì ˆ ë¹„ìœ¨
pub const PREDICTION_STOP_LOSS_PCT: f64 = 0.005;     // 0.5%
pub const PREDICTION_TAKE_PROFIT_PCT: f64 = 0.01;    // 1%

// ì˜ˆì¸¡ ì‹ ë¢°ë„ ì„ê³„ê°’ (ì´ ì´ìƒì¼ ë•Œë§Œ í¬ì§€ì…˜ ì§„ì…)
pub const PREDICTION_CONFIDENCE_THRESHOLD: f64 = 0.001;  // 0.1%

// ì˜¨ë¼ì¸ í•™ìŠµ í•™ìŠµë¥ 
pub const PREDICTION_LEARNING_RATE: f64 = 0.001;
```

## ì „ëµ ë¡œì§

### 1. Warmup ë‹¨ê³„
- ì²˜ìŒ 1000 ìƒ˜í”Œ ë™ì•ˆì€ í•™ìŠµë§Œ ìˆ˜í–‰
- ëª¨ë¸ì´ ì¶©ë¶„íˆ í•™ìŠµëœ í›„ ê±°ë˜ ì‹œì‘

### 2. ì˜ˆì¸¡ ë° ê±°ë˜
1. ì˜¤ë”ë¶ì—ì„œ 8ê°œ íŠ¹ì„± ì¶”ì¶œ
2. ì‹ ê²½ë§ìœ¼ë¡œ 1ì´ˆ í›„ ê°€ê²© ë³€í™” ì˜ˆì¸¡
3. ì˜ˆì¸¡ê°’ì´ ì„ê³„ê°’ ì´ìƒì´ë©´ í¬ì§€ì…˜ ì§„ì…
   - ì–‘ìˆ˜: Long (ê°€ê²© ìƒìŠ¹ ì˜ˆì¸¡)
   - ìŒìˆ˜: Short (ê°€ê²© í•˜ë½ ì˜ˆì¸¡)

### 3. ì˜¨ë¼ì¸ í•™ìŠµ
- 1ì´ˆ í›„ ì‹¤ì œ ê°€ê²© ë³€í™”ì™€ ì˜ˆì¸¡ ë¹„êµ
- ì˜¤ì°¨ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëª¨ë¸ ê°€ì¤‘ì¹˜ ì—…ë°ì´íŠ¸
- ì‹œì¥ ë³€í™”ì— ì ì‘í•˜ëŠ” ëª¨ë¸

### 4. ë¦¬ìŠ¤í¬ ê´€ë¦¬
- Stop-loss / Take-profit ê¸°ë°˜ ìë™ ì²­ì‚°
- ìµœëŒ€ í¬ì§€ì…˜ ë³´ìœ  ì‹œê°„ ì œí•œ (5ì´ˆ)
- ë°˜ëŒ€ ì‹ í˜¸ ì‹œ ì¦‰ì‹œ ì²­ì‚°

## ì¶”ì¶œ íŠ¹ì„± ìƒì„¸

| íŠ¹ì„± | ì„¤ëª… | ë²”ìœ„ |
|------|------|------|
| `spread_bps` | ìŠ¤í”„ë ˆë“œ (basis points) | 0 ~ âˆ |
| `imbalance_level1` | 1ì°¨ ë ˆë²¨ bid/ask ìˆ˜ëŸ‰ ë¶ˆê· í˜• | -1 ~ 1 |
| `imbalance_multi_level` | ë‹¤ì¸µ(10ë ˆë²¨) ê°€ì¤‘ ë¶ˆê· í˜• | -1 ~ 1 |
| `pressure_ratio` | log(bid_qty / ask_qty) | -âˆ ~ âˆ |
| `price_change_pct` | ìµœê·¼ ê°€ê²© ë³€í™”ìœ¨ | % |
| `volatility` | ê°€ê²© ë³€ë™ í‘œì¤€í¸ì°¨ | bps |
| `volume_weighted_spread` | ìˆ˜ëŸ‰ ê°€ì¤‘ ìŠ¤í”„ë ˆë“œ | 0 ~ âˆ |
| `trade_intensity` | ì „ì²´ ìˆ˜ëŸ‰ ë³€í™”ìœ¨ | % |

## ëª¨ë¸ ì•„í‚¤í…ì²˜

```
Layer           Shape           Activation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Input           (8,)            -
FC1             (8, 32)         ReLU
FC2             (32, 16)        ReLU
FC3             (16, 1)         Linear
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total params: 8*32 + 32 + 32*16 + 16 + 16*1 + 1 = 817
```

## ì„±ëŠ¥ ì§€í‘œ

ì „ëµ ì‹¤í–‰ ì¤‘ ë‹¤ìŒ ì§€í‘œê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤:

### GUI ëª¨ë‹ˆí„°
- **ğŸ“– Order Book**: ì‹¤ì‹œê°„ ì˜¤ë”ë¶ í…Œì´ë¸” (Bid/Ask ê°€ê²© ë° ìˆ˜ëŸ‰)
- **ğŸ“Š Depth Chart**: ì˜¤ë”ë¶ ê¹Šì´ ì°¨íŠ¸ (Mid Price ì¤‘ì‹¬ Bid/Ask ëˆ„ì  ë¬¼ëŸ‰)
- **ğŸ“ˆ Equity Curve**: ìë³¸ ë³€í™” ì¶”ì´
- **ğŸ“Š PnL Chart**: ì‹¤í˜„/ë¯¸ì‹¤í˜„ ì†ìµ
- **ğŸ¯ Win Rate**: ìŠ¹ë¥  ì°¨íŠ¸
- **ğŸ“Š Position**: í¬ì§€ì…˜ í¬ê¸° ë³€í™”

### ì „ëµ ì§€í‘œ
- **Prediction Accuracy**: ë°©í–¥ ì˜ˆì¸¡ ì •í™•ë„ (%)
- **Training Samples**: í•™ìŠµì— ì‚¬ìš©ëœ ìƒ˜í”Œ ìˆ˜
- **Win Rate**: ìˆ˜ìµ ê±°ë˜ ë¹„ìœ¨
- **Total Returns**: ì´ ìˆ˜ìµë¥ 

## ê°œì„  ë°©í–¥

1. **ë” ë³µì¡í•œ ëª¨ë¸**: LSTM, Transformer ë“± ì‹œê³„ì—´ ëª¨ë¸ ì ìš©
2. **ë” ë§ì€ íŠ¹ì„±**: ê±°ë˜ëŸ‰, ì‹œê°„ëŒ€ë³„ íŒ¨í„´ ë“± ì¶”ê°€
3. **ì•™ìƒë¸”**: ì—¬ëŸ¬ ëª¨ë¸ì˜ ì˜ˆì¸¡ ê²°í•©
4. **í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹**: í•™ìŠµë¥ , ë„¤íŠ¸ì›Œí¬ í¬ê¸° ìµœì í™”
