- 매수, 매도 주문을 동시에 제출하여 스프레드와 거래소 리베이트를 취하는 전략
- 짧은시간 동안 가격 떨림(틱단위로)이 발생하면 그 사이에서 엄청난 거래를 반복하면서 돈을 버는 방법
    - 예를들어, 1초동안 100원과 100.1원 사이를 1000번 왔다갔다 했다면 매매 기회가 1000번 포착되는 것, 이를 통해 돈을 벌 수 있음 (거래소 수수료 제외 0.1원*1000 ⇒ 초당 100원 수익)

## 로직

### 적정가 계산 방법

1. micro price

$$
P_{micro} = \frac{V_{bid} \cdot P_{ask} + V_{ask} \cdot P_{bid}}{V_{bid} + V_{ask}}
$$

- V: 오더북 L1 혹은 L1~L5까지의 Volume
1. order book imbalance

$$
\rho = \frac{V_{bid} - V_{ask}}{V_{bid} + V_{ask}}
$$

- ρ값이 크면 bid(매수) 주문을 공격적으로(좀 더 높은가격으로), ask(매도) 주문을 소극적으로(좀 더 높은 가격으로) 이동

### 스프레드 계산 방법

$$
r(s, q, t, \sigma) = s - q \cdot \gamma \cdot \sigma^2
$$

- 재고 리스크 관리 반영
    - s: 현재 중간가
    - q: 현재 보유 재고
    - γ: 위험 회피 성향 파라미터
    - σ²: 시장 변동성
- 재고가 많은 경우 r을 낮춰서 매도 주문이 더 잘 체결되도록 함
- 변동성이 클수록 재고 위험이 크므로 가격 조정폭을 더 크게 가져감

$$
\delta = \frac{2}{\gamma} \ln(1 + \frac{\gamma}{k})
$$

- 스프레드 결정로직 반영
    - γ: 위험 회피 성향 파라미터
    - k: 유동성 밀도

$$
\lambda(\delta) = A \cdot e^{-k \cdot \delta}
$$

- 유동성밀도 k 부가설명
    - **λ(δ)**: 거리 δ에 둔 내 주문이 초당 체결되는 횟수
    - **A**: 거리 0 (시장가)에서의 기본 거래 빈도 → 시장의 활발함을 나타냄
    - **k (Kappa)**: 체결 확률이 줄어드는 기울기 (Decay Rate)
- 최근 n분동안의 체결 데이터를 활용해서 구할 수 있음(업데이트)

### 주문 집행

$$
매수(Bid): r - (\delta / 2)\newline매도(Ask): r + (\delta / 2)
$$

- 레이어링
    - 단일 스프레드에 몰빵하는게 아니라 여러 스프레드에 나누어 배치하는 방법

### Toxic Flow Detection

- 정보 우위가 있는 트레이더가 대량으로 매매할때 손실이 발생할 수 있음
    - 다른 거래소의 가격을 관찰하다가 급격한 변화가 있을 때 주문 취소
    - 단기적으로 변동성이 임계치를 넘으면 스프레드를 극단적으로 벌리거나 주문 취소
    - L1/L2 Ratio : L1 물량이 급격히 사라지는 경우 가격 변동의 전조신호로 받아들일 수 있으므로 주문 취소